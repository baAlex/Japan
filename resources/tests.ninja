
cflags = -O0 -g -DJA_DEBUG -I./include

rule compile
 command = clang $cflags `pkg-config --cflags cmocka` -c $in -o $out

rule link
 command = clang `pkg-config --libs cmocka` -lm $in -o $out


build ./build/tests/configurations.o: compile ./tests/configurations.c
build ./build/tests/dictionaries.o:   compile ./tests/dictionaries.c
build ./build/tests/lists.o:          compile ./tests/lists.c
build ./build/tests/test-suite.o:     compile ./tests/test-suite.c

build test-suite: link $
./build/tests/configurations.o $
./build/tests/dictionaries.o $
./build/tests/lists.o $
./build/tests/test-suite.o $
./libjapan-dbg.a
