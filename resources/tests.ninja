
cflags = -O0 -g -DJA_DEBUG -I./include

rule Compile
 command = clang $cflags `pkg-config --cflags cmocka` -c $in -o $out

rule Link
 command = clang `pkg-config --libs cmocka` -lm $in -o $out


build ./build/tests/configurations.o: Compile ./tests/configurations.c
build ./build/tests/dictionaries.o:   Compile ./tests/dictionaries.c
build ./build/tests/images.o:         Compile ./tests/images.c
build ./build/tests/lists.o:          Compile ./tests/lists.c
build ./build/tests/test-suite.o:     Compile ./tests/test-suite.c

build test-suite: Link $
./build/tests/configurations.o $
./build/tests/dictionaries.o $
./build/tests/images.o $
./build/tests/lists.o $
./build/tests/test-suite.o $
./libjapan-dbg.a
